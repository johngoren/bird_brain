#!/usr/bin/env python3

import click
import os

PROJECT_DIR = "/Users/Desktop/natureguides"
SOURCE_DIR = "/Volumes/Birdbrain/Natureguides/mockExpansionFiles"
PACKAGE = "com.natureguides.birdguide"

OBB_VERSION = 38
OBB_FILENAME = f'main.{OBB_VERSION}.{PACKAGE}.obb'


ASSETS_DIR = f'{PROJECT_DIR}/Android/app/src/main/assets'
OBB_SOURCE_DIR = f'{PROJECT_DIR}/expansion/assets'
OBB_DESTINATION_DIR = f'/storage/emulated/0/Android/obb/{PACKAGE}'
OBB_DESTINATION_PATH = f'{OBB_DESTINATION_DIR}/{OBB_FILENAME}'




@click.group()
def cli():
    """Utilities for Nature Guides"""
    pass

@cli.command()
def status():
    """Check whether OBB is installed, asset state."""

    cmd = f'adb shell ls {OBB_DESTINATION_DIR}'
    output = os.system(cmd)
    click.echo(f'\n\n\n\nBirdbrain status report.')
    click.echo(f'------------------------')
    click.echo(f'OBB directory: {OBB_DESTINATION_DIR}...')
    click.echo(f'Exited with code {output}')


    pass

@cli.command()
def mock():
    """Sets up test assets."""
    click.echo("hello, world")

@cli.command()
def clean():
    """Removes test assets."""
    click.echo("hello, world")

@cli.command()
def pack():
    """Install OBB expansion pack on Android device"""
    #TODO: Push dir if doesn't exist.
    cmd = f'adb push {OBB_SOURCE_DIR}/main.{OBB_VERSION}.com.natureguides.birdguide.obb {OBB_DESTINATION_DIR}'
    os.system(cmd)
    pass


@cli.command()
def boot():
    """Run app after installing OBB expansion pack"""
    pass

@cli.command()
def audit():
    """Check for missing multimedia"""


if __name__ == '__main__':
    cli()

